# VSS 反向代理环境配置
# 解决端口冲突的统一代理方案

# =============================================================================
# 应用基础配置
# =============================================================================
APP_NAME=vss
NODE_ENV=production
DOCKER_NETWORK=vss-network
DOCKER_SUBNET=172.20.0.0/16

# =============================================================================
# 端口配置 - 反向代理方案
# =============================================================================
# Nginx 统一入口端口 (唯一对外暴露的端口)
NGINX_PORT=80

# 开发工具端口 (可选)
DEV_TOOLS_PORT=8080

# 内部服务端口 (不对外暴露)
BACKEND_PORT=3000
FRONTEND_INTERNAL_PORT=80

# 数据库端口 (内网)
DB_PORT=5432
REDIS_PORT=6379

# =============================================================================
# 数据库配置
# =============================================================================
DB_TYPE=postgres
DB_HOST=database
DB_NAME=vss_production_db
DB_USERNAME=prod_user
DB_PASSWORD=your_secure_db_password_here

# 数据库连接池配置
DB_MAX_CONNECTIONS=50
DB_CONNECTION_TIMEOUT=10000

# PostgreSQL 版本
POSTGRES_VERSION=15
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_VERSION=7
REDIS_PASSWORD=your_secure_redis_password_here

# =============================================================================
# API 配置
# =============================================================================
API_PREFIX=/api/v1
API_TIMEOUT=15000
API_RATE_LIMIT=50

# 前端 API 配置 (通过反向代理)
VITE_API_BASE_URL=/api
VITE_WS_URL=/ws
VITE_APP_TITLE=VSS Vision Platform
VITE_APP_VERSION=1.0.0
VITE_APP_DESCRIPTION=VSS Vision Platform

# =============================================================================
# 安全配置
# =============================================================================
JWT_SECRET=your_super_secret_jwt_key_min_32_chars_long
CORS_ORIGIN=http://localhost

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=warn
LOG_ROOT_LEVEL=error
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=false

# =============================================================================
# 生产环境优化
# =============================================================================
PROD_OPTIMIZE=true
PROD_GZIP=true
PROD_CACHE_CONTROL=public,max-age=31536000

# =============================================================================
# Nginx 配置
# =============================================================================
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# =============================================================================
# Spring Boot 配置
# =============================================================================
SPRING_PROFILES_ACTIVE=prod
SERVER_PORT=3000
