# VSS 反向代理环境配置示例
# 复制此文件为 .env.proxy 并根据需要修改配置

# =============================================================================
# 应用基础配置
# =============================================================================
APP_NAME=vss
NODE_ENV=production
DOCKER_NETWORK=vss-network
DOCKER_SUBNET=172.20.0.0/16

# =============================================================================
# 端口配置 - 反向代理方案
# =============================================================================
# Nginx 统一入口端口 (唯一对外暴露的端口)
NGINX_PORT=80

# 开发工具端口 (可选，开发环境使用)
DEV_TOOLS_PORT=8080

# 内部服务端口（不对外暴露，避免端口冲突）
BACKEND_PORT=3002
FRONTEND_INTERNAL_PORT=3000

# 数据库端口 (内网通信)
DB_PORT=5432
REDIS_PORT=6379

# =============================================================================
# 数据库配置
# =============================================================================
DB_TYPE=postgres
DB_HOST=database
DB_NAME=vss_production_db
DB_USERNAME=prod_user
# 重要：请修改为安全的密码
DB_PASSWORD=请_修改_为_安全_密码

# 数据库连接池配置
DB_MAX_CONNECTIONS=50
DB_CONNECTION_TIMEOUT=10000

# PostgreSQL 版本
POSTGRES_VERSION=15
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_VERSION=7
# 重要：请修改为安全的密码
REDIS_PASSWORD=请_修改_为_安全_Redis_密码

# =============================================================================
# API 配置
# =============================================================================
API_PREFIX=/api/v1
API_TIMEOUT=15000
API_RATE_LIMIT=50

# 前端 API 配置 (通过反向代理)
VITE_API_BASE_URL=http://localhost/api/v1
VITE_APP_TITLE=VSS Vision Platform
VITE_APP_VERSION=1.0.0
VITE_APP_DESCRIPTION=VSS Vision Platform - 统一反向代理版本

# =============================================================================
# 安全配置
# =============================================================================
# 重要：请生成并设置一个强密码（至少32字符）
JWT_SECRET=请_生成_并_设置_强_JWT_密钥_至少32字符长度
CORS_ORIGIN=http://localhost

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=warn
LOG_ROOT_LEVEL=error
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=false

# =============================================================================
# 生产环境优化
# =============================================================================
PROD_OPTIMIZE=true
PROD_GZIP=true
PROD_CACHE_CONTROL=public,max-age=31536000

# =============================================================================
# Nginx 配置
# =============================================================================
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# =============================================================================
# Spring Boot 配置
# =============================================================================
SPRING_PROFILES_ACTIVE=prod
SERVER_PORT=3002

# =============================================================================
# SSL/HTTPS 配置 (生产环境)
# =============================================================================
# 取消注释并配置以启用 HTTPS
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem
# FORCE_HTTPS=true

# =============================================================================
# 监控和调试配置
# =============================================================================
# 启用详细日志 (开发环境)
# NGINX_LOG_LEVEL=debug
# APP_DEBUG=true

# 监控配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# 性能调优配置
# =============================================================================
# 连接池配置
NGINX_KEEPALIVE_TIMEOUT=65
NGINX_CLIENT_MAX_BODY_SIZE=100M

# 压缩配置
GZIP_ENABLED=true
GZIP_COMP_LEVEL=6
GZIP_MIN_LENGTH=1024

# 缓存配置
STATIC_CACHE_DURATION=1y
API_CACHE_CONTROL=no-cache

# =============================================================================
# 开发工具配置
# =============================================================================
# 邮件测试工具
MAILHOG_ENABLED=true
MAILHOG_SMTP_PORT=1025
MAILHOG_HTTP_PORT=8025

# 数据库管理工具
ADMINER_ENABLED=true
ADMINER_DEFAULT_SERVER=database

# =============================================================================
# 网络配置
# =============================================================================
# Docker 网络配置
DOCKER_DRIVER=bridge
DOCKER_MTU=1500

# DNS 配置
DOCKER_DNS=8.8.8.8,8.8.4.4

# =============================================================================
# 备份和恢复配置
# =============================================================================
# 数据卷配置
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点备份
BACKUP_RETENTION_DAYS=7

# =============================================================================
# 环境特定配置
# =============================================================================
# 开发环境特殊配置
# DEV_MODE=true
# HOT_RELOAD=true
# DEBUG_MODE=true

# 生产环境特殊配置
# PROD_MODE=true
# ERROR_REPORTING=true
# PERFORMANCE_MONITORING=true
