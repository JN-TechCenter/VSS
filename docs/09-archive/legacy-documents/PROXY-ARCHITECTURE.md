# VSS åå‘ä»£ç†æ¶æ„è¯´æ˜

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
å¤–éƒ¨è®¿é—® â†’ Nginx (80ç«¯å£) â†’ å†…éƒ¨æœåŠ¡
```

## ğŸ“Š ç«¯å£åˆ†é…è¯¦æƒ…

### å¯¹å¤–æš´éœ²ç«¯å£
| ç«¯å£ | æœåŠ¡ | ç”¨é€” | è®¿é—®åœ°å€ |
|------|------|------|----------|
| 80   | Nginx | ä¸»è¦æœåŠ¡å…¥å£ | http://localhost |
| 8080 | Nginx | å¼€å‘å·¥å…·å…¥å£ | http://localhost:8080 |

### å†…éƒ¨å®¹å™¨ç«¯å£ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
| å®¹å™¨ | å†…éƒ¨ç«¯å£ | æœåŠ¡ç±»å‹ | Nginxè·¯ç”± |
|------|----------|----------|-----------|
| vss-frontend | 3000 | Reactåº”ç”¨ | `/` â†’ `frontend:3000` |
| vss-backend | 3002 | Spring Boot | `/api/` â†’ `backend:3002/api/` |
| vss-database | 5432 | PostgreSQL | å†…éƒ¨è®¿é—® |
| vss-redis | 6379 | Redisç¼“å­˜ | å†…éƒ¨è®¿é—® |

## ğŸ”„ è¯·æ±‚è·¯ç”±æµç¨‹

### å‰ç«¯é¡µé¢è®¿é—®
```
ç”¨æˆ·æµè§ˆå™¨ â†’ http://localhost/ 
           â†’ Nginx:80 
           â†’ frontend:3000 
           â†’ Reactåº”ç”¨
```

### APIè¯·æ±‚
```
å‰ç«¯åº”ç”¨ â†’ http://localhost/api/users/register 
         â†’ Nginx:80 
         â†’ backend:3002/api/users/register 
         â†’ Spring Boot API
```

### WebSocketè¿æ¥
```
å‰ç«¯åº”ç”¨ â†’ http://localhost/ws/ 
         â†’ Nginx:80 
         â†’ backend:3002/ws/ 
         â†’ Spring Boot WebSocket
```

## ğŸ›¡ï¸ å®‰å…¨ä¼˜åŠ¿

1. **ç«¯å£éš”ç¦»**: åªæš´éœ²å¿…è¦çš„ç«¯å£ï¼ˆ80, 8080ï¼‰
2. **ç»Ÿä¸€å…¥å£**: æ‰€æœ‰è¯·æ±‚é€šè¿‡Nginxç»Ÿä¸€ç®¡ç†
3. **å†…ç½‘é€šä¿¡**: å®¹å™¨é—´ä½¿ç”¨å†…éƒ¨ç½‘ç»œé€šä¿¡
4. **è´Ÿè½½å‡è¡¡**: Nginxæä¾›è´Ÿè½½å‡è¡¡èƒ½åŠ›
5. **SSLæ”¯æŒ**: å¯åœ¨Nginxå±‚ç»Ÿä¸€é…ç½®HTTPS

## ğŸš€ å¯åŠ¨æ–¹å¼

```bash
# æ¨èæ–¹å¼ - ä»£ç†æ¨¡å¼
docker-manage.bat proxy

# è®¿é—®åº”ç”¨
http://localhost          # ä¸»åº”ç”¨
http://localhost:8080     # å¼€å‘å·¥å…·
```

## ğŸ” æ•…éšœæ’é™¤

### æ£€æŸ¥ç«¯å£å ç”¨
```bash
# æ£€æŸ¥å¯¹å¤–ç«¯å£
netstat -an | findstr ":80"
netstat -an | findstr ":8080"

# å†…éƒ¨ç«¯å£ä¸åº”è¯¥å¯¹å¤–å¯è§
netstat -an | findstr ":3000"  # åº”è¯¥ä¸ºç©º
netstat -an | findstr ":3002"  # åº”è¯¥ä¸ºç©º
```

### æ£€æŸ¥å®¹å™¨çŠ¶æ€
```bash
docker-manage.bat status
docker-compose -f docker-compose.proxy.yml ps
```

### æŸ¥çœ‹Nginxæ—¥å¿—
```bash
docker-manage.bat logs nginx
```

## ğŸ’¡ å¼€å‘è¯´æ˜

- å‰ç«¯å¼€å‘ï¼šä»£ç ä¿®æ”¹ä¼šé€šè¿‡Viteçƒ­é‡è½½è‡ªåŠ¨æ›´æ–°
- åç«¯å¼€å‘ï¼šAPIä¿®æ”¹éœ€è¦é‡å¯åç«¯å®¹å™¨
- é…ç½®ä¿®æ”¹ï¼šNginxé…ç½®ä¿®æ”¹éœ€è¦é‡å¯Nginxå®¹å™¨
- æ•°æ®åº“ï¼šä½¿ç”¨Docker volumesæŒä¹…åŒ–æ•°æ®

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ç«¯å£
å¦‚éœ€ä¿®æ”¹ç«¯å£ï¼Œç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ï¼š
- `docker-compose.proxy.yml` - DockeræœåŠ¡é…ç½®
- `nginx.conf` - Nginxè·¯ç”±é…ç½®
- `.env.proxy` - ç¯å¢ƒå˜é‡é…ç½®
